# 想法记录

2019.8.31

## 选择与放置策略分开

在Packing问题中，物品选择和物品放置属于两种不同的策略，
对应到代码中，CutSearch部分完成放置策略，Solver和PlateSearch部分完成物品选择策略。

### 原料尾部物品处理

**PlateSearch**接受原料编号和可用物品的组合，输出该组合下的最优局部解，其目标是尽量提高本块原料的利用率，而其停止条件是本块原料上无法再放进去更多的物品。

## 顶层搜索侧重点

顶层搜索首先要保证满足物品的顺序约束，然后需要尽可能的尝试更好的物品组合。其中可能用到一些随机或是启发式的策略，有待仔细研究。

2019.9.1

## 为每块原料挑选物品策略

1. 程序运行初始阶段，先是随机的挑选物品，放置在原料上，同时记录物品在该原料上的利用率分布值
2. 待收集到一定数目的值以后，开始按照策略挑选物品，此时可以将挑选物品的问题看作是带顺序约束的背包问题，数学模型如下：

    > **已知**
    > 原料面积：$C$
    > 栈的数目：$S$
    > 每个栈中物品数目：$N[i]$
    > 每个栈中物品的面积：$A[i][j]$
    > 每个栈中物品的价值：$P[i][j]$
    > $i, j \in Z \and i \in [0, S), j \in [0, N[i])$
    >
    > **决策**
    > 选择栈i的前多少个物品：$x_i$
    > $x_i \in Z \and x_i \in [0, N[i]]$
    >
    > **约束**
    > 选择物品的面积和不小于原料的面积：
    > $\sum_{i = 0}^S{\sum_{j = 0}^{x_i}{A[i][j]}} \geq C$
    > 选择物品的面积和不大于原料面积的$\alpha$倍：
    > $\sum_{i = 0}^S{\sum_{j = 0}^{x_i}{A[i][j]}} \leq \alpha \cdot C$
    >
    > **目标**
    > 最大化选择物品的价值：
    > $\max \sum_{i = 0}^S{\sum_{j = 0}^{x_i}{P[i][j]}}$

2019.9.4

## PlateSearch实现

输入：原料id，随机数发生器，计时器，辅助数据
输出：对应原料上的可行解，解的目标函数值
